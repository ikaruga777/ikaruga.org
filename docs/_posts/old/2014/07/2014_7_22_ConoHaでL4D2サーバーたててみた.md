---
title: 2014/7/22 ConoHaでL4D2サーバーたててみた
date: 2014-07-22 22:18:00 +0900
feed:
  enable: true
layout: post
---
<p>      Left4Dead2対戦欲が上がりに上がった末、自分の勉強も兼ねてサーバーを立ててみることにした。    </p>    <h1>機材選び</h1>    <p>      前使ってたデスクトップPCでどうにかなるか試そうとしたが、電源が死んでて使えなかった。<br>      よくよく考えたら電源が死んだから今のPCにリプレイスしたんだった。    </p>    <p>      しゃーないので、VPSを視野にいれた。<br>      今やってる業務でもサーバーとか機材系の話は出てくるし(winだけど)、サクッと要らなくなったら捨てれるものをと思った。<br>      いろいろ探してみたんだけど、広告に惹かれてConoHaにした。<br>      ドキュメントまずまずしっかりしてたし。俺でも大丈夫でしょうみたいな感じ。    </p>    <h1>linux入れる</h1>    <p>      ConoHa登録してVPS追加して初めてのCentOSとご対面した。<br>      そして粛々と6.5にあげた。apt-get使えなくてびっくりした(yum)<br>      SSHは、ConoHaのweb上で使えるVNCがマジ便利で必要を感じなかった。<br>      ちゃんと設定したいけど。    </p>    <h1>サーバー持ってくる</h1>    <p>      とりあえずL4D2のデフォルトのサーバーを引っ張ってくるために<br>      <a href="http://l4d2.ngnl.org/?%E3%82%B5%E3%83%BC%E3%83%90%E6%A7%8B%E7%AF%89%2FLinux" target="_blank">http://l4d2.ngnl.org/?%E3%82%B5%E3%83%BC%E3%83%90%E6%A7%8B%E7%AF%89%2FLinux</a>      ここ参考にしてコマンドポッチポチ。しようとしたけど上手く行かず。<br>      なにやら古い情報らしく<br>      <a href="http://futureblog.jp/entry/2014/03/24/135043" target="_blank">http://futureblog.jp/entry/2014/03/24/135043</a>      こちらの記事を参考にしたら上手くいった。<br>      これでサーバー起動まで出来た。    </p>    <h1>ポート開放</h1>    <p>      Linuxはiptablesでポートいじるとのこと。<br>      記述方法とかなんか見たことあるなと思ったらCiscoのルータのaccess-listじゃねーか!!!!    </p>    <p>      これ授業でやった!!っていいながらL4D2デフォルトのUDP27015をACCEPTして、設定してiptables再起動して…繋がらない。<br>      <a href="http://www.conoha.jp/blog/1570.html" target="_blank">http://www.conoha.jp/blog/1570.html</a><br>      ここ見ながら設定見直した。<br>      らport全部REJECTしたあとに27015ACCEPTしてた。    </p>    <p>      これ授業でやった!!(実験で1時間無駄にしたことある!!!!!!)って言いながらvimで直して無事connectして遊べるようになった。      デフォルトで動かすならここまでできれば大丈夫。    </p>    <h1>confogl</h1>    <p>      世の中の先人の皆様は偉大である。      <a href="http://dd2n.com/l4d2/?p=2601" target="_blank">http://dd2n.com/l4d2/?p=2601</a>      ここにあるzipでleft4dead2/を上書きする。 以上。 これでconfoglは動いた。    </p>    <h1>うごかした</h1>    <ul>      <li>さすがにプラグイン,設定が足りず、dd2nと同様には行かなかった。</li>      <li>        デッドセンターチャプ3終了時にセグメンテーション違反をを起こしてサーバが再起動した。        久々にセグメンテーション違反の文字列を見て感動した。      </li>      <li>        その後恐ろしい勢いでcoopが始まってたのでカントリーフィルタくらいは入れたい。      </li>    </ul>    <p>安定化まではまだ時間がかかりそうでございます。</p>    <h1>所感</h1>    <ul>      <li>vimが少しだけ使えるようになってよかった。</li>      <li>ありがとうネットワークの授業。</li>    </ul>    <h1>TODO</h1>    <ul>      <li>サーバー起動時に対戦できるようにする。</li>      <li>開幕デスポができるチャプターの感染者切り替え</li>      <li>セーフルームの扉が勝手に開かないようにする</li>      <li>!spectateとかの省略形を有効にする(設定を探す)</li>      <li>チャプ4前に落ちた原因さがす</li>    </ul>    <p>以上です。</p>    <div id="footer">      <span id="timestamp"> July 22nd, 2014 10:18pm </span>      <span class="tag">UVB_76noBenkyou</span>      <span class="tag">uvb76nikki</span>    </div>
